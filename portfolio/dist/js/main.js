(()=>{"use strict";const e=[{id:1,title:"Нет пепла",img:"1.png",right:!0},{id:2,title:"Есть дым и пепел",img:"2.png",right:!1},{id:3,title:"Меньше едкого запаха,чем при курении сигарет",img:"3.png",right:!0},{id:4,title:"Нет нагревания",img:"4.png",right:!1},{id:5,title:"Настоящий вкус табака",img:"5.png",right:!0},{id:6,title:"Нет сигаретного дыма",img:"6.png",right:!0}],t=["Не совсем так","Кажется, где-то ошибка","Чего-то не хватает"];"undefined"!=typeof window&&window.Telegram.WebApp.expand();const i=document.querySelector(".game_title"),n=document.querySelector(".game_wrapper"),s=document.querySelector(".container"),a=document.querySelector(".btn_again"),l=document.querySelector(".btn_close"),d=document.querySelector(".btn_start"),c=document.querySelector(".game_final-frame");let o;function r(e){if(e.classList.contains("filled")){const t=e.dataset.id,i=document.querySelector(`.game_item[data-id="${t}"]`);e.src="./images/7.png",e.classList.remove("filled"),e.dataset.id="",i.classList.remove("disabled")}}function m(e){if(e.classList.contains("disabled"))return;const t=document.querySelector(".puzzle_container img:not(.filled)");if(t){const i=e.querySelector("img");t.src=i.src,t.dataset.id=e.dataset.id,t.classList.add("filled"),e.classList.add("disabled")}}window.onload=()=>{if(o=document.querySelector(".game_validate"),!o)return void console.error("Элемент с классом 'game_validate' не найден на странице.");const _=document.createElement("button");_.classList.add("btn_validate","btn_game"),_.textContent="Готово",_.addEventListener("click",(()=>{const d=document.querySelectorAll(".puzzle_field"),r=Array.from(d).every((t=>{const i=t.dataset.id,n=e.find((e=>e.id===Number(i)));return t.src.includes(n.img)===n.right})),m=function(){const e=Math.floor(Math.random()*t.length);return t[e]}();r?function(e,t,i,n,s,a,l,d){e.classList.add("hide"),e.classList.add("hide"),t.classList.remove("hide"),d.classList.remove("hide"),i.style.display="none",n.style.display="flex",a.classList.remove("hide"),l.style.display="none",s.innerHTML="<b>Прекрасно! Вы отлично справились!</b><br/>Главное преимущество — отсутствие горения. <br/>А значит",s.append()}(_,a,n,s,i,c,o,l):function(e,t,i,n,s,a,l){a.style.display="block",e.classList.add("hide"),t.classList.remove("hide"),i.style.display="none",n.style.display="none",s.style.display="none";const d=document.createElement("div");d.classList.add("quize__x__item","quize__x__item--status"),d.innerHTML=`\n        <div class='quize__x__item--status__info'>\n          <div class='quize__x__item--status__info__inner'>\n            <div class='quize__x__item--status__icon'>\n              <img src='images/wrong.svg'>\n            </div>\n            <div class='quize__x__item--status__title'>${l}</div>\n          </div>\n        </div>\n      `,a.insertBefore(d,s.nextSibling)}(_,a,o,n,i,s,m);const u=u;!function(e,t){const i={user_id:e,event:"passed_all_scenario"};fetch("https://iqosmeetingbot-test.cleverbots.ru/api/actions/q_club/webbot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then((e=>e.json())).then((e=>{console.log("Событие успешно отправлено:",e)})).catch((e=>{console.error("Ошибка при отправке события:",e)}))}(u)})),a.addEventListener("click",(()=>{location.reload()})),l.addEventListener("click",(()=>{tg.close()})),d.addEventListener("click",(()=>{i.textContent=null,n.classList.remove("hide"),o.classList.remove("hide"),d.classList.add("hide"),s.style.display="block"})),o.appendChild(_),function(){const e=document.createElement("div");e.classList.add("puzzle_container");const t=document.createElement("div");t.classList.add("puzzle_frame");for(let i=1;i<=4;i++){const n=document.createElement("img");n.classList.add("puzzle_field",`puzzle_field_${i}`),n.src="./images/7.png",n.alt="puzzle_wrapper",e.appendChild(t),t.appendChild(n),n.addEventListener("click",(()=>{r(n)}))}o.appendChild(e)}(),function(e,t,i){e.forEach(((e,n)=>{const s=document.createElement("div");s.classList.add("game_item"),s.dataset.id=e.id,s.innerHTML=`\n        <p class="item_title">${e.title}</p>\n        <img src="./images/${e.img}" alt="pazzle" class="item_image item_image_${n}" />\n      `,s.addEventListener("click",(()=>{i(s)})),t.appendChild(s)}))}(e,n,m),function(e){e.innerHTML='<img src="./images/final.png" alt="finalFrame" class="game_final-img" />\n  <span class="game_final-text game_final-text_1"\n    >Нет сигаретного дыма</span\n  >\n  <span class="game_final-text game_final-text_2"\n    >Настоящий вкус табака</span\n  >\n  <span class="game_final-text game_final-text_3">Нет пепла</span>\n  <span class="game_final-text game_final-text_4"\n    >Меньше едкого запаха, чем при курении сигарет</span\n  >'}(c)}})();